<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>NMFfitXn-class. NMF 0.23</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<!-- bootstrap css -->
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<!-- highlighting css -->
<link href="css/highlight.css" rel="stylesheet">
<!-- custom css -->
<link href="css/staticdocs.css" rel="stylesheet">
<!-- knitr files -->
<script src="js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- bootstrap javascript -->
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<!-- d3 word cloud -->
<script src="js/d3.v3.min.js"></script>
<script src="js/d3.layout.cloud.js"></script>
  </head>

  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="index.html">NMF</a>
  </div>

  <!-- Collect the nav links, forms, and other content for toggling -->
  <div class="collapse navbar-collapse navbar-ex1-collapse">
    <ul class="nav navbar-nav">
	  <li><a href="PAGE-MAN.html"><span class="glyphicon glyphicon-home"></span> Index</a></li>
    </ul>
    <!-- <form class="navbar-form navbar-left" role="search">
      <div class="form-group">
        <input type="text" class="form-control" placeholder="Search">
      </div>
      <button type="submit" class="btn btn-default">Submit</button>
    </form>--> 
    <ul class="nav navbar-nav navbar-right">
      <li><p class="navbar-text">
      <span style="font-size:14px" class="label label-primary">Version&nbsp;0.23</span>
      &nbsp;</p></li>
    </ul>
  </div><!-- /.navbar-collapse -->
</nav>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Structure for Storing All Fits from Multiple NMF Runs</h1>

<div class="row">
  <div class="span8">
    <div class="description">
      <h2>Description</h2>
      
      <p><p>This class is used to return the result from a multiple run of a single NMF
algorithm performed with function <code>nmf</code> with option
<code>keep.all=TRUE</code> (cf. <code><a href='nmf.html'>nmf</a></code>).</p></p>
  
    </div>
    
    
    
    <div class="Details">
      <h2>Details</h2>
      
      <p>It extends both classes <code><a href='NMFfitX-class.html'>NMFfitX-class</a></code> and <code>list</code>, and
stores the result of each run (i.e. a <code>NMFfit</code> object) in its
<code>list</code> structure.</p>
  
      <p>IMPORTANT NOTE: This class is designed to be <strong>read-only</strong>, even though
all the <code>list</code>-methods can be used on its instances. Adding or removing
elements would most probably lead to incorrect results in subsequent calls.
Capability for concatenating and merging NMF results is for the moment only
used internally, and should be included and supported in the next release of
the package.</p>
  
    </div>

    <div class="Slots">
      <h2>Slots</h2>
      
      <p><ol>
<li>.Datastandard slot that contains the S3 <code>list</code> object data.
See R documentation on S3/S4 classes for more details (e.g., <code><a href='http://www.inside-r.org/r-doc/methods/setOldClass'>setOldClass</a></code>).</p>
  
      <p></li>
</ol></p>
  
      <p></p>
  
    </div>

    <div class="Methods">
      <h2>Methods</h2>
      
      <p><ol>
<li>algorithm<code>signature(object = "NMFfitXn")</code>: Returns the name of the common NMF algorithm used to compute all fits
stored in <code>object</code></p>
  
      <p>Since all fits are computed with the same algorithm, this method returns the
name of algorithm that computed the first fit.
It returns <code>NULL</code> if the object is empty.</p>
  
      <p></li>
<li>basis<code>signature(object = "NMFfitXn")</code>: Returns the basis matrix of the best fit amongst all the fits stored in
<code>object</code>.
It is a shortcut for <code>basis(fit(object))</code>.</p>
  
      <p></li>
<li>coef<code>signature(object = "NMFfitXn")</code>: Returns the coefficient matrix of the best fit amongst all the fits stored in
<code>object</code>.
It is a shortcut for <code>coef(fit(object))</code>.</p>
  
      <p></li>
<li>compare<code>signature(object = "NMFfitXn")</code>: Compares the fits obtained by separate runs of NMF, in a single
call to <code><a href='nmf.html'>nmf</a></code>.</p>
  
      <p></li>
<li>consensus<code>signature(object = "NMFfitXn")</code>: This method returns <code>NULL</code> on an empty object.
The result is a matrix with several attributes attached, that are used by
plotting functions such as <code><a href='heatmaps.html'>consensusmap</a></code> to annotate the plots.</p>
  
      <p></li>
<li>dim<code>signature(x = "NMFfitXn")</code>: Returns the dimension common to all fits.</p>
  
      <p>Since all fits have the same dimensions, it returns the dimension of the
first fit.
This method returns <code>NULL</code> if the object is empty.</p>
  
      <p></li>
<li>entropy<code>signature(x = "NMFfitXn", y = "ANY")</code>: Computes the best or mean entropy across all NMF fits stored in <code>x</code>.</p>
  
      <p></li>
<li>fit<code>signature(object = "NMFfitXn")</code>: Returns the best NMF fit object amongst all the fits stored in <code>object</code>,
i.e. the fit that achieves the lowest estimation residuals.</p>
  
      <p></li>
<li>.getRNG<code>signature(object = "NMFfitXn")</code>: Returns the RNG settings used for the best fit.</p>
  
      <p>This method throws an error if the object is empty.</p>
  
      <p></li>
<li>getRNG1<code>signature(object = "NMFfitXn")</code>: Returns the RNG settings used for the first run.</p>
  
      <p>This method throws an error if the object is empty.</p>
  
      <p></li>
<li>minfit<code>signature(object = "NMFfitXn")</code>: Returns the best NMF model in the list, i.e. the run that achieved the lower
estimation residuals.</p>
  
      <p>The model is selected based on its <code>deviance</code> value.</p>
  
      <p></li>
<li>modelname<code>signature(object = "NMFfitXn")</code>: Returns the common type NMF model of all fits stored in <code>object</code></p>
  
      <p>Since all fits are from the same NMF model, this method returns the
model type of the first fit.
It returns <code>NULL</code> if the object is empty.</p>
  
      <p></li>
<li>nbasis<code>signature(x = "NMFfitXn")</code>: Returns the number of basis components common to all fits.</p>
  
      <p>Since all fits have been computed using the same rank, it returns the
factorization rank of the first fit.
This method returns <code>NULL</code> if the object is empty.</p>
  
      <p></li>
<li>nrun<code>signature(object = "NMFfitXn")</code>: Returns the number of runs performed to compute the fits stored in the list
(i.e. the length of the list itself).</p>
  
      <p></li>
<li>purity<code>signature(x = "NMFfitXn", y = "ANY")</code>: Computes the best or mean purity across all NMF fits stored in <code>x</code>.</p>
  
      <p></li>
<li>runtime.all<code>signature(object = "NMFfitXn")</code>: If no time data is available from in slot &#145;runtime.all&#146; and argument
<code>null=TRUE</code>, then the sequential time as computed by
<code><a href='algorithmic.html'>seqtime</a></code> is returned, and a warning is thrown unless <code>warning=FALSE</code>.</p>
  
      <p></li>
<li>seeding<code>signature(object = "NMFfitXn")</code>: Returns the name of the common seeding method used the computation of all fits
stored in <code>object</code></p>
  
      <p>Since all fits are seeded using the same method, this method returns the
name of the seeding method used for the first fit.
It returns <code>NULL</code> if the object is empty.</p>
  
      <p></li>
<li>seqtime<code>signature(object = "NMFfitXn")</code>: Returns the CPU time that would be required to sequentially compute all NMF
fits stored in <code>object</code>.</p>
  
      <p>This method calls the function <code>runtime</code> on each fit and sum up the
results.
It returns <code>NULL</code> on an empty object.</p>
  
      <p></li>
<li>show<code>signature(object = "NMFfitXn")</code>: Show method for objects of class <code>NMFfitXn</code></p>
  
      <p></li>
</ol></p>
  
      <p></p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre><code class="r">

# generate a synthetic dataset with known classes
n &lt;- 20; counts &lt;- c(5, 2, 3);
V &lt;- syntheticNMF(n, counts)

# get the class factor
groups &lt;- V$pData$Group

# perform multiple runs of one algorithm, keeping all the fits
res &lt;- nmf(V, 3, nrun=3, .options=&#39;k&#39;) # .options=list(keep.all=TRUE) also works
</code></pre>

<pre><code>## # NOTE - CRAN check detected: limiting maximum number of cores [2/4]
## # NOTE - CRAN check detected: limiting maximum number of cores [2/4]
</code></pre>

<pre><code class="r">res
</code></pre>

<pre><code>## &lt;Object of class: NMFfitXn &gt;
##   Method: brunet 
##   Runs:  3 
##   RNG:
##    407L, 1934160049L, -162350402L, 779694119L, -1901819332L, 520338957L, -994911894L 
##   Total timing:
##    user  system elapsed 
##   2.500   0.233   1.801 
##   Sequential timing:
##    user  system elapsed 
##   0.364   0.000   0.366
</code></pre>

<pre><code class="r">summary(res)
</code></pre>

<pre><code>##      Length Class  Mode
## [1,] 1      NMFfit S4  
## [2,] 1      NMFfit S4  
## [3,] 1      NMFfit S4
</code></pre>

<pre><code class="r"># get more info
summary(res, target=V, class=groups)
</code></pre>

<pre><code>##      Length Class  Mode
## [1,] 1      NMFfit S4  
## [2,] 1      NMFfit S4  
## [3,] 1      NMFfit S4
</code></pre>

<pre><code class="r"># compute/show computational times
runtime.all(res)
</code></pre>

<pre><code>##    user  system elapsed 
##   2.500   0.233   1.801
</code></pre>

<pre><code class="r">seqtime(res)
</code></pre>

<pre><code>##    user  system elapsed 
##   0.364   0.000   0.366
</code></pre>

<pre><code class="r"># plot the consensus matrix, computed on the fly
## Not run:  consensusmap(res, annCol=groups) 
</code></pre>

  </div>
  <div class="span4">
    <!-- <ul>
      <li>NMFfitXn-class</li>
    </ul>
    <ul>
      
    </ul> -->
      
    <h2>See also</h2>
    
  Other multipleNMF: <code><a href='NMFfitX1-class.html'>NMFfitX1-class</a></code>, <code><a href='NMFfitX-class.html'>NMFfitX-class</a></code>

        
  </div>
</div>
      
      <footer>
      
<p>Built by <a href="https://github.com/renozao/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>